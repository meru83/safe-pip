# 第2章: グローバル環境の整理とクリーンなPython運用

---

## 📌 章の目的

この章では、すでにグローバル環境にインストールされている不要なパッケージの確認・削除、およびPython自体の再インストールによって、クリーンで安全な環境を整える方法を解説します。仮想環境を正しく使うためには、まずグローバル環境の整理が重要です。

---

## 🔍 背景・問題提起

仮想環境を使わずに開発を続けていると、以下のような問題が発生します：

* グローバルに意図しないパッケージが溜まる
* `pip install` を間違えてグローバルに実行し、環境が汚染される
* 他のプロジェクトに影響が出る

このようなリスクを最小限に抑えるためには、一度Pythonのグローバル環境をリセットするのが有効です。

---

## 🛠 実践手順・コード例

### ● インストール済みパッケージの確認（グローバル環境）

```bash
pip list
```

このコマンドで、現在のグローバル環境に入っている全パッケージが表示されます。標準ライブラリ以外に、意図しないパッケージが含まれていないか確認しましょう。

### ● 不要パッケージの削除

```bash
pip uninstall パッケージ名
```

何が標準ライブラリか分からない場合、Python公式の標準ライブラリ一覧を参照するのがおすすめです。

---

## 🔁 グローバル環境の完全初期化

グローバル環境を完全に初期化したい場合は、Pythonをアンインストールしてから再インストールすることを推奨します。

### アンインストール手順（Windows）

1. 「アプリと機能」または「コントロールパネル > プログラムのアンインストール」から Python を探してアンインストール
2. 「AppData」フォルダ内の残留ファイルを削除（例：`C:\Users\ユーザー名\AppData\Local\Programs\Python\`）

### 再インストール手順

1. 公式サイト [https://www.python.org/downloads/](https://www.python.org/downloads/) から最新版のPythonをダウンロード
2. インストール時に **「Add Python to PATH」** にチェックを入れる
3. `python --version` や `pip --version` でバージョン確認

---

## 📎 補足・Tips

### ● Python再インストール時のポイント

* "for all users" ではなく **"just for me"** を選ぶと、ユーザーディレクトリに限定されるため管理しやすい
* `C:\Users\ユーザー名\AppData\Local\Programs\Python\Python3xx\` にインストールされる
* 再インストール後は、再度 `python --version` や `pip --version` で確認しておく

### ● pipのバージョンも再確認

```bash
python -m pip install --upgrade pip
```

グローバルのpipは最新に保っておくと、仮想環境を作成した際の初期状態も整いやすくなります。

### ● 現在の環境構成を記録する（requirements.txtの活用）

クリーンなPython運用の一環として、環境を再現可能にするための構成ファイルを作成しておくと便利です。

```bash
pip freeze > requirements.txt
```

このコマンドにより、現在インストールされているすべてのパッケージとそのバージョンを `requirements.txt` に書き出すことができます。将来別の環境で同じ構成を再現したいときに次のコマンドで一括インストール可能です：

```bash
pip install -r requirements.txt
```

---

## ✅ この章のまとめ

* `pip list` で現在のグローバル環境を確認
* 不要なパッケージは `pip uninstall` で削除
* 完全な初期化にはPythonのアンインストール＋再インストールが有効
* クリーンな環境維持には `pip freeze` による構成記録も重要

次章では、誤ってグローバル環境に `pip install` をしてしまうことを防ぐための、安全対策（カスタムpipスクリプトの作成）について学びます。

👉 [次の章へ](step3.md)
